"use strict";define(["jquery","av"],function(e,n){return function(){function a(){i();var a=e("input#search").val().trim(),s=e("ul#searchResult"),r=e("ul#searchLog"),t=e("ul#searchNoresult");if(""===a)return e("#searchNoresult").addClass("noactive"),e("#searchNoresult").empty(),void e("label").removeClass("noactive");var c=new n.Query("Song");c.contains("name",a),c.find().then(function(n){if(s.empty(),0===n.length)t.empty(),t.append("<div>结果不存在</div>");else{e("ul#searchNoresult").empty();for(var a=0;a<n.length;a++){var i=n[a].attributes,r='\n                                <div>\n                                    <svg class="icon">\n                                        <use xlink:href="#icon-search"></use>\n                                    </svg>\n                                    <a href="./song.html?id='+n[a].id+'"><li data-id="'+n[a].id+'">'+i.name+" - "+i.singer+"</li></a>\n                                </div>\n                             ";s.append(r)}}}),c.find().then(function(e){if(0!==e.length)for(var n=0;n<e.length;n++){var a=e[n].attributes,i='\n                                <div id="div">\n                                    <svg class="icon icon3">\n                                        <use xlink:href="#icon-shizhong"></use>\n                                    </svg>\n                                    <a href="./song.html?id='+e[n].id+'"><li data-id="'+e[n].id+'">'+a.name+" - "+a.singer+'</li></a>\n                                    <svg id="icon4" class="icon icon4">\n                                        <use xlink:href="#icon-quxiao1"></use>\n                                    </svg>\n                                </div>\n\n                             ';r.prepend(i)}})}function i(){e("label").addClass("noactive"),e(".icon2").addClass("active")}e(".icon2").on("click",function(n){e("input#search").val(""),e("label").removeClass("noactive"),e("#searchKey").empty(),e("#wrapper").removeClass("noactive"),e("#searchLog").removeClass("noactive"),e("#searchResult").addClass("noactive"),e("#searchNoresult").empty()}),e("#hot-search").on("click","li",function(n){i();var s=e(n.currentTarget).text();e("input#search").val(s);var r=null;r&&window.clearTimeout(r),r=setTimeout(function(){r=null,a(),e("#searchResult").removeClass("noactive"),e("#searchLog").addClass("noactive"),e("#wrapper").addClass("noactive"),e("#searchKey").empty();var i=e(n.currentTarget).text();console.log(i);var s='<li>搜索"'+i+'"<li/>';e("#searchKey").append(s)},400)}),e("#searchLog").on("click","#icon4",function(n){e(n.currentTarget).parent().remove()})}});