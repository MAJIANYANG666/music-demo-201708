"use strict";!function(n,e,a){function s(){n("label").addClass("noactive"),n(".icon2").addClass("active")}function t(n,i){f&&e.clearTimeout(f),f=setTimeout(function(){f=null,n()},i)}function r(){v(),h()}function l(n){var e=n.attributes;return'\n            <div>\n                <svg class="icon">\n                    <use xlink:href="#icon-search"></use>\n                </svg>\n                <a href="./song.html?id='+n.id+'"><li data-id="'+n.id+'">'+e.name+" - "+e.singer+"</li></a>\n            </div>\n         "}function u(n){var e=n.attributes;return'\n            <div id="div">\n                <svg class="icon icon3">\n                    <use xlink:href="#icon-shizhong"></use>\n                </svg>\n                <a href="./song.html?id='+results[i].id+'"><li data-id="'+results[i].id+'">'+e.name+" - "+e.singer+'</li></a>\n                <svg id="icon4" class="icon icon4">\n                    <use xlink:href="#icon-quxiao1"></use>\n                </svg>\n            </div>\n         '}function c(n){var e=new a.Query("Song");e.contains("name",n);var i=new a.Query("Song");return i.contains("singer",n),a.Query.or(e,i).find()}function o(e){if(n("ul#searchResult").empty(),0===e.length)n("ul#searchResult").html("结果不存在");else for(var i=0;i<e.length;i++){var a=l(e[i]);n("ul#searchResult").append(a)}}function d(e){if(0===e.length)n("ul#searchResult").html("结果不存在");else for(var i=0;i<e.length;i++){var a=u(e[i]);n("ul#searchLog").prepend(a)}}function v(){var e=n("input#search").val().trim();""!==e?(c(e).then(o),c(e).then(d)):n("label").removeClass("noactive")}function h(){n("#searchLog").addClass("noactive"),n("#wrapper").addClass("noactive"),n("#searchKey").empty();var e='<li>搜索"'+n("input#search").val()+'"<li/>';n("#searchKey").append(e)}var f=null;n("input#search").on("input",function(){s(),t(r,400)})}(jQuery,window,AV);